
  <!-- ./Mobile navigation -->
  <div class="recipes-hero-banners">
    <div class="container">
      <div class="row">
        <% @recipe_slide_locations.each do |location| %>
          <% slide = location.slides.first %>
          <div class="col-lg-3 col-6 mb-50">
            <div class="img">
              <% if slide&.image&.attached? %>
                <%= image_tag(main_app.url_for(slide.image), class: "recipe_image", alt: slide&.name) %>
              <% else %>
                <%= image_tag(asset_path('noimage/default-product-image.jpg'), alt: slide&.name) %>
              <% end %>
            </div>
            <a href="<%= slide&.link_url %>"><h4><%= slide&.name %></h4></a>
          </div>
        <% end %>
      </div>
    </div>
  </div>
  <div class="category-search-wrapper">
    <div class="container">
      <div class="d-flex align-items-center justify-content-between mb-20">
        <div class="title-wrap">
          <h2 class="title">All Categories</h2>
          <p class="d-none d-sm-block">
            He goes on adventures around the world in search of new flavors
          </p>
        </div>
        <div class="header-search d-none d-sm-block">
          <%= form_tag recipe_search_path, method: :get, id: 'recipe-search-form' do %>
            <%= search_field_tag :q, 
                                params[:q], 
                                placeholder: "Search recipes", 
                                class: "form-control", 
                                id: "recipe-search", 
                                autocomplete: "off" %>
        <% end %>
        </div>
      </div>
      <div class="wrap d-flex align-items-center justify-content-between">
        <% @recipe_taxons.limit(8).each do |category| %>
            <% category_recipe_id = category.permalink.sub("recipes/", "") %>
          <div class="recipe-category text-center">
            <%= link_to nested_recipe_taxons_path(category_recipe_id), data: { turbolinks: false }, title: "All #{category.name} Products" do %>
              <% if browser.device.mobile? || !browser.device.tablet? %>
                <div class="img">
                <% if category.icon.present? %>
                    <%= image_tag main_app.url_for(category.icon.try(:attachment)), alt:"#{category.name} Image",size: "160x160"%> 
                <% else %>
                    <%= image_tag "noimage/default-category-image-small.jpg", alt:"#{category.name} Image", size: "160x160" %>
                <% end %>
              <% else %>
                <% if category.icon.present? %>
                    <%= image_tag main_app.url_for(category.icon.my_cf_image_url(:smal)), alt:"#{category.name} Image", size: "160x160" %> 
                <% else %>
                    <%= image_tag "noimage/default-category-image.jpg", alt:"#{category.name} Image", size: "160x160" %>
                <% end %>
              <% end %>
              </div>
              <h4><%= category.name.humanize %></h4>
            <% end %>
          </div>
        <% end %>
      </div>
      <div class="header-search d-block d-sm-none">
        <%= form_tag recipe_search_path, method: :get, id: 'recipe-search-form' do %>
            <%= search_field_tag :q, 
                                params[:q], 
                                placeholder: "Search recipes", 
                                class: "form-control", 
                                id: "recipe-search", 
                                autocomplete: "off" %>
        <% end %>
      </div>
    </div>
  </div>
 <div class="popular-categories-wrapper">
    <% @recipe_taxons.limit(4).each do |category| %>
    <% popular_recipes = category.recipes.where.not(popularity: 0).order(popularity: :desc) %>
      <div class="container">
        <div class="wrap">
          <div class="d-flex align-items-center justify-content-between mb-20">
            <div class="title-wrap">
              <h2 class="title">Most popular in <%= category.name %></h2>
              <p class="d-none d-sm-block">
                He goes on adventures around the world in search of new flavors
              </p>
            </div>
            <% category_recipe_id = category.permalink.sub("recipes/", "") %>
            <%= link_to nested_recipe_taxons_path(category_recipe_id), data: { turbolinks: false }, class: "btn btn-black outline d-none d-sm-block" do %>
              <span>See More</span>
            <% end %>
          </div>
           <div class="row">
          <% popular_recipes.limit(4).each do |recipe| %>
              <div class="col-lg-3 col-6">
                <div class="product-wrap" data-aos="fade-in" data-aos-once="true" data-aos-duration="500">
                  <div class="product-img">
                    <span class="badge">Spring</span>
                  </div>
                  <div class="product-desc text-center wrap-long-words">
                    <h4><%= recipe.name %></h4>
                    <div class="d-none d-sm-block">
                      <%= recipe&.description&.truncate(160, omission: '...')&.html_safe %>
                    </div>
                    <%= link_to recipe_product_path(recipe, taxon_id: category.id), class: "btn btn-primary d-none d-sm-block", data: { turbolinks: false } do %>
                      <span>See More</span>
                    <% end %>
                  </div>
                </div>
              </div>
          <% end %>
        </div>
        <div class="text-center d-block d-sm-none">
          <%= link_to nested_recipe_taxons_path(category_recipe_id), data: { turbolinks: false }, class: "btn btn-black outline d-none d-sm-block" do %>
            <span>See More</span>
          <% end %>
        </div>
      </div>
      </div>
    <% end %>
  </div>
  <div class="featured-recipe-video">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-md-7">
          <div class="embed-responsive embed-responsive-16by9">
            <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/xujDlx5E94g" allowfullscreen="" /></iframe>
          </div>
        </div>
        <div class="col-md-5">
          <div class="text-block text-center">
            <h6>Featured Video</h6>
            <h2 class="title mb-20">Extracts and Flavorings</h2>
            <p>
              Nature's Flavors has been producing natural and organic
              flavorings for over 40 years. We specialize in custom-made,
              all-natural and organic flavorings for the food and beverage
              industry. Our CEO and Founde
            </p>
            <p>
              <strong>What else makes Nature’s Flavors so special?</strong>
              <br />
              There’s no middle man… <a href="#">more</a>
            </p>
            <% if @recipe_taxons.any? %>
              <% recipe = @recipe_taxons&.first&.recipes&.first&.slug %>
              <a href="<%= recipe.present? ? "/recipe/#{recipe}?taxon_id=#{@recipe_taxons.first.id}" : "#" %>" class="btn btn-primary"><span>Get the Recipe</span>
              </a>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="home-blog-wrapper">
    <div class="container-fluid">
      <div class="row">
        <div class="col-lg-2"></div>
        <div class="col-lg-8">
          <div class="wrap">
            <div class="title-wrap d-xl-flex flex-row-reverse align-items-center justify-content-between">
              <div class="right"> <a href="https://blog.naturesflavors.com" class="blog-link">More from our blog</a>
              </div>
              <div class="left d-flex flex- align-items-start">
                <div class="title-img"><img src="assets/images/blog-icon.svg" alt=""></div>
                <div class="title-info">
                  <h3 class="title">Flavorful Bites<span class="blog-badge">Blog</span></h3>
                  <div class="sm-title text-uppercase">RECIPES | TIPS AND TRICKS | helpful information</div>
                </div>
              </div>
            </div>
            <div class="slider-wrapper position-relative">
              <ul id="blog-slider" class="ontent-slider">
                <li data-aos="fade-up" data-aos-once="true" data-aos-duration="700">
                  <a href="https://blog.naturesflavors.com/teriyaki-smash-burger-tacos-recipe/" class="video-thumb-wrap">
                    <div class="video-thumb mb-10">
                      <img src="assets/images/video-thumb-1.jpg" alt="">
                    </div>
                    <h4>Ice Cream Cone Bath Bombs</h4>
                  </a>
                </li>
                <li data-aos="fade-up" data-aos-once="true" data-aos-duration="700">
                  <a href="https://blog.naturesflavors.com/pecan-maple-glaze-donut-recipe/" class="video-thumb-wrap">
                    <div class="video-thumb mb-10">
                      <img src="assets/images/video-thumb-1.jpg" alt="">
                    </div>
                    <h4>DIY Watermelon Lip Scrub</h4>
                  </a>
                </li>
                <li data-aos="fade-up" data-aos-once="true" data-aos-duration="700">
                  <a href="https://blog.naturesflavors.com/teriyaki-smash-burger-tacos-recipe/" class="video-thumb-wrap">
                    <div class="video-thumb mb-10">
                      <img src="assets/images/video-thumb-1.jpg" alt="">
                    </div>
                    <h4>Ice Cream Cone Bath Bombs</h4>
                  </a>
                </li>
                <li data-aos="fade-up" data-aos-once="true" data-aos-duration="700">
                  <a href="https://blog.naturesflavors.com/pecan-maple-glaze-donut-recipe/" class="video-thumb-wrap">
                    <div class="video-thumb mb-10">
                      <img src="assets/images/video-thumb-1.jpg" alt="">
                    </div>
                    <h4>DIY Watermelon Lip Scrub</h4>
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </div>
        <div class="col-lg-2"></div>
      </div>
    </div>
  </div> 
</div>
<!-- /.wrapper --> 

<!-- cart sidebar -->
<aside class="cart-sidebar-wrapper">
  <div class="overlay"></div>
  <div class="cart-sidebar">
    <div class="cart-sidebar-header">
      <div class="cart-sidebar-title">My Cart</div>
      <button type="button" class="btn close-sidebar-btn">Close</button>
    </div>
    <div class="cart-sidebar-body d-flex flex-column justify-content-between">
      <ul class="cart-items">
        <li class="cart-item">
          <button type="button" class="btn btn-primary remove-btn">Close</button>
          <a href="#" class="thumbnail"><img src="assets/images/product-thumb-1.jpg" alt="product thumbnail"></a>
          <div class="cart-item-details d-flex flex-column justify-content-between">
            <h4><a href="#">Sample Pack of Flavor Powder</a></h4>
            <select class="custom-select qty-dropdown">
              <option>1</option>
              <option>2</option>
              <option>3</option>
              <option>4</option>
              <option>5</option>
              <option>6</option>
              <option>7</option>
              <option>8</option>
              <option>9</option>
              <option>10</option>
            </select>
            <div class="price-size text-right"><span>2 x .24</span>.48</div>
          </div>
        </li>
        <li class="cart-item">
          <button type="button" class="btn btn-primary remove-btn">Close</button>
          <a href="#" class="thumbnail"><img src="assets/images/product-thumb-2.jpg" alt="product thumbnail"></a>
          <div class="cart-item-details d-flex flex-column justify-content-between">
            <h4><a href="#">Sample Pack of Flavor Powder</a></h4>
            <select class="custom-select qty-dropdown">
              <option>1</option>
              <option>2</option>
              <option>3</option>
              <option>4</option>
              <option>5</option>
              <option>6</option>
              <option>7</option>
              <option>8</option>
              <option>9</option>
              <option>10</option>
            </select>
            <div class="price-size text-right"><span>2 x .24</span>.48</div>
          </div>
        </li>
        <li class="grand-total d-flex align-items-center justify-content-between">Total:<strong>$52.87</strong></li>
      </ul>
      <div class="body-sidebar-footer">
        <div class="cart-similar-item">
          <div class="wrap">
            <p>You might need this:</p>
            <div class="similar-item-thumb"><a href="#"><img src="assets/images/product-thumb-1.jpg" alt=""></a></div>
            <h4><a href="#">Acorn Flavored Powder, Natural (8 oz.)</a></h4>
            <a href="#" class="btn btn-primary">$14.70  - Add to Cart</a> </div>
        </div>
        <button type="button" class="btn btn-primary btn-block"><strong>$52.87 - Check Out</strong></button>
      </div>
    </div>
  </div>
</aside>
<!-- /.cart sidebar --> 

<!-- mobile search menu -->
<div class="mobile-search-menu">
  <div class="search-wrap">
    <input type="text" class="form-control" placeholder="Search...">
  </div>
</div>
<!-- /.mobile search menu --> 

<!-- video modal -->
<div class="modal fade video-modal">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Video Title</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">&times;</span> </button>
      </div>
      <div class="modal-body">
        <div class="embed-responsive embed-responsive-16by9">
          <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/zpOULjyy-n8?rel=0" allowfullscreen></iframe>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- /.video modal --> 

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> 
<script src="assets/js/bootstrap.bundle.min.js"></script> 
<script src="assets/js/lightslider.js"></script> 
<script src="assets/js/slinky.js"></script> 
<script src="assets/js/aos.js"></script> 

<!-- Initialize animations --> 
<script>
  AOS.init();
</script> 

<!-- For mobile menu --> 
<script>
  const slinky = $('#menu').slinky({title:true});
</script> 

<!-- Bootstrap popver --> 
<script>
  $(function () {
    $('[data-toggle="popover"]').popover();
  })
</script> 
<script>
  $('.close-menu').on('click', function(e) {
    $('.mobile-menu').toggleClass("show");
    e.preventDefault();
  });
</script> 
<!--<script>
  $('.sub-menu > li').click(function(e){
    e.stopPropagation();
  $(this).toggleClass('active');
    $(this).children('div').slideToggle();
    $(this).closest('.parent').siblings().children('div').slideUp();
  });
</script>-->
<script>
  $(document).ready(function() {
    $('#videos-slider').lightSlider({
        item: 2,
        loop: false,
        slideMove: 1,
        easing: 'cubic-bezier(0.25, 0, 0.25, 1)',
        speed: 600,
    slideMargin: 120,
    enableTouch: true,
    pager: false,
    onSliderLoad: function (el) {
      var parent = el.parent();
      var action = parent.find('.lSAction');
      action.insertBefore(parent);
      },
        responsive : [
        {
          breakpoint:1199,
          settings: {
            slideMargin: 40,
          }
        },
        {
          breakpoint:991,
          settings: {
            item:2,
            slideMove:1,
            slideMargin: 30
          }
        },
        {
          breakpoint:575,
          settings: {
            item:1,
            slideMargin:20
          }
        }
      ]
    });
  });
</script> 
<script>
  $(document).ready(function() {
    $('#blog-slider').lightSlider({
        item: 2,
        loop: false,
        slideMove: 1,
        easing: 'cubic-bezier(0.25, 0, 0.25, 1)',
        speed: 600,
    slideMargin: 120,
    enableTouch: true,
    pager: false,
        onSliderLoad: function (el) {
      var parent = el.parent();
      var action = parent.find('.lSAction');
      action.insertBefore(parent);
      },
        responsive : [
        {
          breakpoint:1199,
          settings: {
            slideMargin: 40,
          }
        },
        {
          breakpoint:991,
          settings: {
            item: 2,
            slideMove: 1,
            slideMargin: 30
          }
        },
        {
          breakpoint:575,
          settings: {
            item: 1,
            slideMargin: 20
          }
        }
      ]
    });
  });  
</script> 
<script>
  $(document).ready(function() {
    $('#reviews-slider').lightSlider({
        item: 3,
        loop: false,
        slideMove: 1,
        easing: 'cubic-bezier(0.25, 0, 0.25, 1)',
        speed: 600,
    slideMargin: 0,
    enableTouch: true,
    pager: false,
        onSliderLoad: function (el) {
      var parent = el.parent();
      var action = parent.find('.lSAction');
      action.insertBefore(parent);
      },
        responsive : [
        {
          breakpoint:1199,
          settings: {
            item: 2,
            slideMove: 1,
          }
        },
        {
          breakpoint:767,
          settings: {
            item: 1,
            slideMove: 1,
          }
        }
      ]
    });
  });  
</script> 
<script>
  $('.nav-cart').on('click', function(e) {
    $('.nav-search').removeClass('active');
    $('.mobile-search-menu').removeClass('active');
    $('.mobile-menu').removeClass('show');
    $('.sidebar-menu-wrapper .overlay').removeClass('active');
    // actual function
    $('.mobile-menu-link').addClass('collapsed');
    $('.cart-sidebar').toggleClass("active");
    $('.nav-cart').toggleClass("active");
    $('.cart-sidebar-wrapper .overlay').toggleClass("active");
    $('body').removeClass("hide-scroll");
  e.preventDefault();
  });
    
  $('.close-sidebar-btn').on('click', function(e) {
    $('.nav-cart').toggleClass("active");
    $('.cart-sidebar').toggleClass("active");
    $('.cart-sidebar-wrapper .overlay').toggleClass("active");
    $('body').removeClass("hide-scroll");
  e.preventDefault();
  });
    
  $('.cart-sidebar-wrapper .overlay').on('click', function(e) {
    $('.nav-cart').toggleClass("active");
    $('.cart-sidebar').toggleClass("active");
    $('.cart-sidebar-wrapper .overlay').toggleClass("active");
    $('body').removeClass("hide-scroll");
  e.preventDefault();
  });
</script> 
<script>
  $('.mobile-menu-link').on('click', function(e) {
    $('.nav-search').removeClass('active');
    $('.mobile-search-menu').removeClass('active');
    $('.nav-cart').removeClass('active');
    $('.cart-sidebar').removeClass('active');
    $('.cart-sidebar-wrapper .overlay').removeClass('active');
    $('body').removeClass("hide-scroll");
  });
</script> 
<script>
  $('.nav-search').on('click', function(e) {
    if($('.nav-cart').hasClass('active')){
      $('.nav-cart').removeClass('active');
    }
    if($('.cart-sidebar').hasClass('active')){
      $('.cart-sidebar').removeClass('active');
    }
    if($('.cart-sidebar-wrapper .overlay').hasClass('active')){
      $('.cart-sidebar-wrapper .overlay').removeClass('active');
    }
    if($('.mobile-menu').hasClass('show')){
      $('.mobile-menu').removeClass('show');
    }
    $('.mobile-menu-link').addClass('collapsed');
    $('.mobile-search-menu').toggleClass("active");
    $('.nav-search').toggleClass("active");
  e.preventDefault();
  });
</script>
</body>
</html>